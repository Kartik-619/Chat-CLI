{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\anshi\\\\OneDrive\\\\Desktop\\\\abc\\\\chat\\\\frontend-cli\\\\src\\\\components\\\\TerminalBox.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef, useEffect } from \"react\";\nimport \"./BoxStyles.css\";\nimport { followUser, unfollowUser } from \"../services/api\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function TerminalBox({\n  setRightView,\n  setProfileUser,\n  setChatUser,\n  users,\n  dmUsers,\n  onFollowToggle,\n  currentUser,\n  activeCommand,\n  setActiveCommand\n}) {\n  _s();\n  const [lines, setLines] = useState([\"Welcome to ChatCLI!\", 'Type \"help\" to see available commands.']);\n  const [input, setInput] = useState(\"\");\n  const [commandHistory, setCommandHistory] = useState([]);\n  const [historyIndex, setHistoryIndex] = useState(-1);\n  const terminalEndRef = useRef(null);\n  const inputRef = useRef(null);\n  const printCmd = (cmd, outputs = []) => {\n    setLines(prev => [...prev, `$ ${cmd}`, ...outputs]);\n\n    // Add command to history if it's not empty\n    if (cmd.trim()) {\n      setCommandHistory(prev => [...prev, cmd]);\n      setHistoryIndex(-1); // Reset history index\n    }\n  };\n\n  // Logout function that redirects to login page\n  const handleLogout = () => {\n    // Clear any stored authentication data\n    localStorage.removeItem('token');\n    localStorage.removeItem('user');\n    localStorage.removeItem('isLoggedIn');\n\n    // Redirect to login page\n    window.location.href = '/login';\n  };\n\n  // Handle keyboard navigation\n  const handleKeyDown = e => {\n    if (e.key === 'ArrowUp') {\n      e.preventDefault();\n      if (commandHistory.length > 0) {\n        let newIndex;\n        if (historyIndex === -1) {\n          // Starting from the most recent command\n          newIndex = commandHistory.length - 1;\n        } else if (historyIndex > 0) {\n          // Moving to older commands\n          newIndex = historyIndex - 1;\n        } else {\n          // Already at the oldest command\n          newIndex = 0;\n        }\n        setHistoryIndex(newIndex);\n        setInput(commandHistory[newIndex]);\n      }\n    } else if (e.key === 'ArrowDown') {\n      e.preventDefault();\n      if (historyIndex !== -1) {\n        if (historyIndex < commandHistory.length - 1) {\n          // Moving to newer commands\n          const newIndex = historyIndex + 1;\n          setHistoryIndex(newIndex);\n          setInput(commandHistory[newIndex]);\n        } else {\n          // Reached the most recent command, clear input\n          setHistoryIndex(-1);\n          setInput(\"\");\n        }\n      }\n    }\n  };\n  const commands = {\n    help: () => [{\n      type: \"header\",\n      content: \"ChatCLI commands:\"\n    }, {\n      type: \"command\",\n      command: \"help\",\n      description: \"Show this help\"\n    }, {\n      type: \"command\",\n      command: \"clear\",\n      description: \"Clear terminal\"\n    }, {\n      type: \"command\",\n      command: \"users\",\n      description: \"Open Users List (on right)\"\n    }, {\n      type: \"command\",\n      command: \"home\",\n      description: \"Open Home view (on right)\"\n    }, {\n      type: \"command\",\n      command: \"open <user>\",\n      description: \"Open a user's profile (left)\"\n    }, {\n      type: \"command\",\n      command: \"follow <user>\",\n      description: \"Follow a user\"\n    }, {\n      type: \"command\",\n      command: \"unfollow <user>\",\n      description: \"Unfollow a user\"\n    }, {\n      type: \"command\",\n      command: \"dm\",\n      description: \"Show DM list (right)\"\n    }, {\n      type: \"command\",\n      command: \"chat <user>\",\n      description: \"Open chat with a user in DM list (right)\"\n    }, {\n      type: \"command\",\n      command: \"logout\",\n      description: \"Log out and return to login page\"\n    }],\n    clear: () => {\n      setLines([]);\n      return [];\n    },\n    users: () => {\n      setRightView(\"users\");\n      return [{\n        type: \"success\",\n        content: \"Switched to Users List view (right side).\"\n      }];\n    },\n    home: () => {\n      setRightView(\"chat\");\n      setProfileUser(null);\n      return [{\n        type: \"success\",\n        content: \"Switched to home view (right side).\"\n      }];\n    },\n    open: args => {\n      if (!args.length) return [{\n        type: \"error\",\n        content: \"Usage: open <username>\"\n      }];\n      const usernameInput = args[0].toLowerCase();\n      const target = users.find(u => {\n        var _u$username, _u$userName;\n        return ((_u$username = u.username) === null || _u$username === void 0 ? void 0 : _u$username.toLowerCase()) === usernameInput || ((_u$userName = u.userName) === null || _u$userName === void 0 ? void 0 : _u$userName.toLowerCase()) === usernameInput;\n      });\n      if (target) {\n        setProfileUser(target);\n        return [{\n          type: \"profile-header\",\n          content: `Opened profile of @${target.username || target.userName}`\n        }, {\n          type: \"profile-info\",\n          label: \"Bio:\",\n          value: target.bio || target.description || target.about || \"No bio available\"\n        }, {\n          type: \"profile-info\",\n          label: \"Gender:\",\n          value: target.gender || target.sex || \"Not specified\"\n        }, {\n          type: \"profile-info\",\n          label: \"Joined:\",\n          value: target.createdAt || target.joinDate || target.registrationDate || \"Unknown\"\n        }];\n      }\n      return [{\n        type: \"error\",\n        content: `User not found: ${args[0]}`\n      }];\n    },\n    follow: async args => {\n      if (!args.length) return [{\n        type: \"error\",\n        content: \"Usage: follow <username>\"\n      }];\n      const usernameInput = args[0].toLowerCase();\n      const targetUser = users.find(u => {\n        var _u$username2, _u$userName2;\n        return ((_u$username2 = u.username) === null || _u$username2 === void 0 ? void 0 : _u$username2.toLowerCase()) === usernameInput || ((_u$userName2 = u.userName) === null || _u$userName2 === void 0 ? void 0 : _u$userName2.toLowerCase()) === usernameInput;\n      });\n      if (!targetUser) return [{\n        type: \"error\",\n        content: `User not found: ${args[0]}`\n      }];\n      try {\n        const res = await followUser(targetUser.username || targetUser.userName, currentUser._id || currentUser.id);\n        if (res.data.success) {\n          onFollowToggle(targetUser.username || targetUser.userName, true);\n          setActiveCommand(`follow ${targetUser.username || targetUser.userName}`);\n          return [{\n            type: \"success\",\n            content: `You are now following @${targetUser.username || targetUser.userName}`\n          }];\n        }\n        return [{\n          type: \"error\",\n          content: `Error: ${res.data.message}`\n        }];\n      } catch (err) {\n        console.error(\"Follow API error:\", err);\n        return [{\n          type: \"error\",\n          content: \"Error following user\"\n        }];\n      }\n    },\n    unfollow: async args => {\n      if (!args.length) return [{\n        type: \"error\",\n        content: \"Usage: unfollow <username>\"\n      }];\n      const usernameInput = args[0].toLowerCase();\n      const targetUser = users.find(u => {\n        var _u$username3, _u$userName3;\n        return ((_u$username3 = u.username) === null || _u$username3 === void 0 ? void 0 : _u$username3.toLowerCase()) === usernameInput || ((_u$userName3 = u.userName) === null || _u$userName3 === void 0 ? void 0 : _u$userName3.toLowerCase()) === usernameInput;\n      });\n      if (!targetUser) return [{\n        type: \"error\",\n        content: `User not found: ${args[0]}`\n      }];\n      try {\n        const res = await unfollowUser(targetUser.username || targetUser.userName, currentUser._id || currentUser.id);\n        if (res.data.success) {\n          onFollowToggle(targetUser.username || targetUser.userName, false);\n          setActiveCommand(`unfollow ${targetUser.username || targetUser.userName}`);\n          return [{\n            type: \"success\",\n            content: `You have unfollowed @${targetUser.username || targetUser.userName}`\n          }];\n        }\n        return [{\n          type: \"error\",\n          content: `Error: ${res.data.message}`\n        }];\n      } catch (err) {\n        console.error(\"Unfollow API error:\", err);\n        return [{\n          type: \"error\",\n          content: \"Error unfollowing user\"\n        }];\n      }\n    },\n    dm: () => {\n      setChatUser(null);\n      setRightView(\"dm\");\n      return [{\n        type: \"success\",\n        content: \"Opened DM List on the right panel.\"\n      }];\n    },\n    chat: args => {\n      if (!args.length) return [{\n        type: \"error\",\n        content: \"Usage: chat <username>\"\n      }];\n      const usernameInput = args[0].toLowerCase();\n      const user = dmUsers.find(u => {\n        var _u$username4, _u$userName4;\n        return ((_u$username4 = u.username) === null || _u$username4 === void 0 ? void 0 : _u$username4.toLowerCase()) === usernameInput || ((_u$userName4 = u.userName) === null || _u$userName4 === void 0 ? void 0 : _u$userName4.toLowerCase()) === usernameInput;\n      });\n      if (!user) return [{\n        type: \"error\",\n        content: `Error: ${args[0]} is not in your DM list.`\n      }];\n      setChatUser(user);\n      setRightView(\"dm\");\n      setProfileUser(user);\n      return [{\n        type: \"success\",\n        content: `Opening chat with ${user.username || user.userName}... (input is focused)`\n      }];\n    },\n    logout: () => {\n      setTimeout(() => {\n        handleLogout();\n      }, 1000);\n      return [{\n        type: \"info\",\n        content: \"Logging out...\"\n      }, {\n        type: \"info\",\n        content: \"Goodbye!\"\n      }];\n    }\n  };\n  const handleCommand = rawCmd => {\n    const tokens = rawCmd.trim().split(/\\s+/);\n    if (!tokens.length) return;\n    const command = tokens[0].toLowerCase();\n    const args = tokens.slice(1);\n    if (commands[command]) {\n      const out = commands[command](args);\n      if (out instanceof Promise) {\n        out.then(res => printCmd(rawCmd, res));\n      } else {\n        printCmd(rawCmd, Array.isArray(out) ? out : [String(out)]);\n      }\n    } else {\n      printCmd(rawCmd, [`Unknown command: ${command}`, 'Type \"help\" for list.']);\n    }\n  };\n  const handleSubmit = e => {\n    e.preventDefault();\n    if (!input.trim()) return;\n    handleCommand(input);\n    setInput(\"\");\n    setHistoryIndex(-1); // Reset history index after submitting\n  };\n  useEffect(() => {\n    var _terminalEndRef$curre;\n    (_terminalEndRef$curre = terminalEndRef.current) === null || _terminalEndRef$curre === void 0 ? void 0 : _terminalEndRef$curre.scrollIntoView({\n      behavior: \"smooth\"\n    });\n  }, [lines]);\n\n  // Focus input when component mounts\n  useEffect(() => {\n    if (inputRef.current) {\n      inputRef.current.focus();\n    }\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"section terminal-box\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"terminal-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"terminal-lights\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"light red\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 250,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"light yellow\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 251,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"light green\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 252,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 249,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"terminal-title\",\n        children: \"CHAT-CLI TERMINAL\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 248,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"terminal-output\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"output-content\",\n        children: [lines.map((line, i) => {\n          // Check if this is a structured object\n          if (typeof line === 'object' && line.type) {\n            switch (line.type) {\n              case \"header\":\n                return /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"line help-header\",\n                  children: line.content\n                }, i, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 265,\n                  columnNumber: 21\n                }, this);\n              case \"command\":\n                return /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"help-line\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"help-command\",\n                    children: line.command\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 272,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"help-description\",\n                    children: line.description\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 273,\n                    columnNumber: 23\n                  }, this)]\n                }, i, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 271,\n                  columnNumber: 21\n                }, this);\n              case \"profile-header\":\n                return /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"line profile-header-line\",\n                  children: line.content\n                }, i, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 278,\n                  columnNumber: 21\n                }, this);\n              case \"profile-info\":\n                return /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"profile-info-line\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"profile-info-label\",\n                    children: line.label\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 285,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"profile-info-value\",\n                    children: line.value\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 286,\n                    columnNumber: 23\n                  }, this)]\n                }, i, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 284,\n                  columnNumber: 21\n                }, this);\n              case \"success\":\n                return /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"line success-message\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"line-prefix\",\n                    children: i > 1 ? \">\" : \"\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 292,\n                    columnNumber: 23\n                  }, this), line.content]\n                }, i, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 291,\n                  columnNumber: 21\n                }, this);\n              case \"error\":\n                return /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"line error-line\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"line-prefix\",\n                    children: i > 1 ? \">\" : \"\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 299,\n                    columnNumber: 23\n                  }, this), line.content]\n                }, i, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 298,\n                  columnNumber: 21\n                }, this);\n              case \"info\":\n                return /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"line info-line\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"line-prefix\",\n                    children: i > 1 ? \">\" : \"\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 306,\n                    columnNumber: 23\n                  }, this), line.content]\n                }, i, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 305,\n                  columnNumber: 21\n                }, this);\n              default:\n                return /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"line output-line\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"line-prefix\",\n                    children: i > 1 ? \">\" : \"\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 313,\n                    columnNumber: 23\n                  }, this), line.content]\n                }, i, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 312,\n                  columnNumber: 21\n                }, this);\n            }\n          }\n\n          // Regular text line\n          let lineClass = \"line\";\n          if (line.startsWith(\"$ \")) {\n            lineClass += \" cmd-line\"; // Command input\n          } else if (line.toLowerCase().includes(\"error\") || line.toLowerCase().includes(\"not found\") || line.toLowerCase().includes(\"usage\")) {\n            lineClass += \" error-line\"; // Error messages\n          } else if (line.toLowerCase().includes(\"following\") || line.toLowerCase().includes(\"unfollowed\") || line.toLowerCase().includes(\"success\")) {\n            lineClass += \" success-line\"; // Success messages\n          } else if (line.toLowerCase().includes(\"welcome\") || line.toLowerCase().includes(\"type\") || line.toLowerCase().includes(\"switched\")) {\n            lineClass += \" info-line\"; // Informational text\n          } else {\n            lineClass += \" output-line\"; // Regular output\n          }\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: lineClass,\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"line-prefix\",\n              children: i > 1 ? \">\" : \"\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 336,\n              columnNumber: 17\n            }, this), line]\n          }, i, true, {\n            fileName: _jsxFileName,\n            lineNumber: 335,\n            columnNumber: 15\n          }, this);\n        }), /*#__PURE__*/_jsxDEV(\"div\", {\n          ref: terminalEndRef\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 341,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 258,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 257,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      className: \"terminal-input\",\n      onSubmit: handleSubmit,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"input-wrapper\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"prompt\",\n          children: \"system>\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 347,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          ref: inputRef,\n          value: input,\n          onChange: e => setInput(e.target.value),\n          onKeyDown: handleKeyDown,\n          autoFocus: true,\n          \"aria-label\": \"terminal-input\",\n          className: \"terminal-cursor\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 348,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 346,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 345,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 247,\n    columnNumber: 5\n  }, this);\n}\n_s(TerminalBox, \"MHiwKz1ms6BNzk98GytJcKS+FNo=\");\n_c = TerminalBox;\nvar _c;\n$RefreshReg$(_c, \"TerminalBox\");","map":{"version":3,"names":["React","useState","useRef","useEffect","followUser","unfollowUser","jsxDEV","_jsxDEV","TerminalBox","setRightView","setProfileUser","setChatUser","users","dmUsers","onFollowToggle","currentUser","activeCommand","setActiveCommand","_s","lines","setLines","input","setInput","commandHistory","setCommandHistory","historyIndex","setHistoryIndex","terminalEndRef","inputRef","printCmd","cmd","outputs","prev","trim","handleLogout","localStorage","removeItem","window","location","href","handleKeyDown","e","key","preventDefault","length","newIndex","commands","help","type","content","command","description","clear","home","open","args","usernameInput","toLowerCase","target","find","u","_u$username","_u$userName","username","userName","label","value","bio","about","gender","sex","createdAt","joinDate","registrationDate","follow","targetUser","_u$username2","_u$userName2","res","_id","id","data","success","message","err","console","error","unfollow","_u$username3","_u$userName3","dm","chat","user","_u$username4","_u$userName4","logout","setTimeout","handleCommand","rawCmd","tokens","split","slice","out","Promise","then","Array","isArray","String","handleSubmit","_terminalEndRef$curre","current","scrollIntoView","behavior","focus","className","children","fileName","_jsxFileName","lineNumber","columnNumber","map","line","i","lineClass","startsWith","includes","ref","onSubmit","onChange","onKeyDown","autoFocus","_c","$RefreshReg$"],"sources":["C:/Users/anshi/OneDrive/Desktop/abc/chat/frontend-cli/src/components/TerminalBox.jsx"],"sourcesContent":["import React, { useState, useRef, useEffect } from \"react\";\r\nimport \"./BoxStyles.css\";\r\nimport { followUser, unfollowUser } from \"../services/api\";\r\n\r\nexport default function TerminalBox({\r\n  setRightView,\r\n  setProfileUser,\r\n  setChatUser,\r\n  users,\r\n  dmUsers,\r\n  onFollowToggle,\r\n  currentUser,\r\n  activeCommand,\r\n  setActiveCommand\r\n}) {\r\n  const [lines, setLines] = useState([\r\n    \"Welcome to ChatCLI!\",\r\n    'Type \"help\" to see available commands.'\r\n  ]);\r\n  const [input, setInput] = useState(\"\");\r\n  const [commandHistory, setCommandHistory] = useState([]);\r\n  const [historyIndex, setHistoryIndex] = useState(-1);\r\n  const terminalEndRef = useRef(null);\r\n  const inputRef = useRef(null);\r\n\r\n  const printCmd = (cmd, outputs = []) => {\r\n    setLines((prev) => [...prev, `$ ${cmd}`, ...outputs]);\r\n    \r\n    // Add command to history if it's not empty\r\n    if (cmd.trim()) {\r\n      setCommandHistory((prev) => [...prev, cmd]);\r\n      setHistoryIndex(-1); // Reset history index\r\n    }\r\n  };\r\n\r\n  // Logout function that redirects to login page\r\n  const handleLogout = () => {\r\n    // Clear any stored authentication data\r\n    localStorage.removeItem('token');\r\n    localStorage.removeItem('user');\r\n    localStorage.removeItem('isLoggedIn');\r\n    \r\n    // Redirect to login page\r\n    window.location.href = '/login';\r\n  };\r\n\r\n  // Handle keyboard navigation\r\n  const handleKeyDown = (e) => {\r\n    if (e.key === 'ArrowUp') {\r\n      e.preventDefault();\r\n      if (commandHistory.length > 0) {\r\n        let newIndex;\r\n        if (historyIndex === -1) {\r\n          // Starting from the most recent command\r\n          newIndex = commandHistory.length - 1;\r\n        } else if (historyIndex > 0) {\r\n          // Moving to older commands\r\n          newIndex = historyIndex - 1;\r\n        } else {\r\n          // Already at the oldest command\r\n          newIndex = 0;\r\n        }\r\n        setHistoryIndex(newIndex);\r\n        setInput(commandHistory[newIndex]);\r\n      }\r\n    } else if (e.key === 'ArrowDown') {\r\n      e.preventDefault();\r\n      if (historyIndex !== -1) {\r\n        if (historyIndex < commandHistory.length - 1) {\r\n          // Moving to newer commands\r\n          const newIndex = historyIndex + 1;\r\n          setHistoryIndex(newIndex);\r\n          setInput(commandHistory[newIndex]);\r\n        } else {\r\n          // Reached the most recent command, clear input\r\n          setHistoryIndex(-1);\r\n          setInput(\"\");\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  const commands = {\r\n    help: () => [\r\n      { type: \"header\", content: \"ChatCLI commands:\" },\r\n      { type: \"command\", command: \"help\", description: \"Show this help\" },\r\n      { type: \"command\", command: \"clear\", description: \"Clear terminal\" },\r\n      { type: \"command\", command: \"users\", description: \"Open Users List (on right)\" },\r\n      { type: \"command\", command: \"home\", description: \"Open Home view (on right)\" },\r\n      { type: \"command\", command: \"open <user>\", description: \"Open a user's profile (left)\" },\r\n      { type: \"command\", command: \"follow <user>\", description: \"Follow a user\" },\r\n      { type: \"command\", command: \"unfollow <user>\", description: \"Unfollow a user\" },\r\n      { type: \"command\", command: \"dm\", description: \"Show DM list (right)\" },\r\n      { type: \"command\", command: \"chat <user>\", description: \"Open chat with a user in DM list (right)\" },\r\n      { type: \"command\", command: \"logout\", description: \"Log out and return to login page\" }\r\n    ],\r\n\r\n    clear: () => { setLines([]); return []; },\r\n\r\n    users: () => { \r\n      setRightView(\"users\"); \r\n      return [{ type: \"success\", content: \"Switched to Users List view (right side).\" }]; \r\n    },\r\n\r\n    home: () => { \r\n      setRightView(\"chat\"); \r\n      setProfileUser(null); \r\n      return [{ type: \"success\", content: \"Switched to home view (right side).\" }]; \r\n    },\r\n\r\n    open: (args) => {\r\n      if (!args.length) return [{ type: \"error\", content: \"Usage: open <username>\" }];\r\n      const usernameInput = args[0].toLowerCase();\r\n      const target = users.find(u => \r\n        u.username?.toLowerCase() === usernameInput || \r\n        u.userName?.toLowerCase() === usernameInput\r\n      );\r\n      if (target) {\r\n        setProfileUser(target);\r\n        return [\r\n          { type: \"profile-header\", content: `Opened profile of @${target.username || target.userName}` },\r\n          { type: \"profile-info\", label: \"Bio:\", value: target.bio || target.description || target.about || \"No bio available\" },\r\n          { type: \"profile-info\", label: \"Gender:\", value: target.gender || target.sex || \"Not specified\" },\r\n          { type: \"profile-info\", label: \"Joined:\", value: target.createdAt || target.joinDate || target.registrationDate || \"Unknown\" }\r\n        ];\r\n      }\r\n      return [{ type: \"error\", content: `User not found: ${args[0]}` }];\r\n    },\r\n\r\n    follow: async (args) => {\r\n      if (!args.length) return [{ type: \"error\", content: \"Usage: follow <username>\" }];\r\n      const usernameInput = args[0].toLowerCase();\r\n      const targetUser = users.find(u => \r\n        u.username?.toLowerCase() === usernameInput || \r\n        u.userName?.toLowerCase() === usernameInput\r\n      );\r\n      if (!targetUser) return [{ type: \"error\", content: `User not found: ${args[0]}` }];\r\n\r\n      try {\r\n        const res = await followUser(targetUser.username || targetUser.userName, currentUser._id || currentUser.id);\r\n        if (res.data.success) {\r\n          onFollowToggle(targetUser.username || targetUser.userName, true);\r\n          setActiveCommand(`follow ${targetUser.username || targetUser.userName}`);\r\n          return [{ type: \"success\", content: `You are now following @${targetUser.username || targetUser.userName}` }];\r\n        }\r\n        return [{ type: \"error\", content: `Error: ${res.data.message}` }];\r\n      } catch (err) {\r\n        console.error(\"Follow API error:\", err);\r\n        return [{ type: \"error\", content: \"Error following user\" }];\r\n      }\r\n    },\r\n\r\n    unfollow: async (args) => {\r\n      if (!args.length) return [{ type: \"error\", content: \"Usage: unfollow <username>\" }];\r\n      const usernameInput = args[0].toLowerCase();\r\n      const targetUser = users.find(u => \r\n        u.username?.toLowerCase() === usernameInput || \r\n        u.userName?.toLowerCase() === usernameInput\r\n      );\r\n      if (!targetUser) return [{ type: \"error\", content: `User not found: ${args[0]}` }];\r\n\r\n      try {\r\n        const res = await unfollowUser(targetUser.username || targetUser.userName, currentUser._id || currentUser.id);\r\n        if (res.data.success) {\r\n          onFollowToggle(targetUser.username || targetUser.userName, false);\r\n          setActiveCommand(`unfollow ${targetUser.username || targetUser.userName}`);\r\n          return [{ type: \"success\", content: `You have unfollowed @${targetUser.username || targetUser.userName}` }];\r\n        }\r\n        return [{ type: \"error\", content: `Error: ${res.data.message}` }];\r\n      } catch (err) {\r\n        console.error(\"Unfollow API error:\", err);\r\n        return [{ type: \"error\", content: \"Error unfollowing user\" }];\r\n      }\r\n    },\r\n\r\n    dm: () => { \r\n      setChatUser(null); \r\n      setRightView(\"dm\"); \r\n      return [{ type: \"success\", content: \"Opened DM List on the right panel.\" }]; \r\n    },\r\n\r\n    chat: (args) => {\r\n      if (!args.length) return [{ type: \"error\", content: \"Usage: chat <username>\" }];\r\n      const usernameInput = args[0].toLowerCase();\r\n      const user = dmUsers.find(u => \r\n        u.username?.toLowerCase() === usernameInput || \r\n        u.userName?.toLowerCase() === usernameInput\r\n      );\r\n      if (!user) return [{ type: \"error\", content: `Error: ${args[0]} is not in your DM list.` }];\r\n\r\n      setChatUser(user);\r\n      setRightView(\"dm\");\r\n      setProfileUser(user);\r\n      return [{ type: \"success\", content: `Opening chat with ${user.username || user.userName}... (input is focused)` }];\r\n    },\r\n\r\n    logout: () => {\r\n      setTimeout(() => {\r\n        handleLogout();\r\n      }, 1000);\r\n      return [\r\n        { type: \"info\", content: \"Logging out...\" },\r\n        { type: \"info\", content: \"Goodbye!\" }\r\n      ];\r\n    }\r\n  };\r\n\r\n  const handleCommand = (rawCmd) => {\r\n    const tokens = rawCmd.trim().split(/\\s+/);\r\n    if (!tokens.length) return;\r\n\r\n    const command = tokens[0].toLowerCase();\r\n    const args = tokens.slice(1);\r\n\r\n    if (commands[command]) {\r\n      const out = commands[command](args);\r\n      if (out instanceof Promise) {\r\n        out.then(res => printCmd(rawCmd, res));\r\n      } else {\r\n        printCmd(rawCmd, Array.isArray(out) ? out : [String(out)]);\r\n      }\r\n    } else {\r\n      printCmd(rawCmd, [`Unknown command: ${command}`, 'Type \"help\" for list.']);\r\n    }\r\n  };\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    if (!input.trim()) return;\r\n    handleCommand(input);\r\n    setInput(\"\");\r\n    setHistoryIndex(-1); // Reset history index after submitting\r\n  };\r\n\r\n  useEffect(() => { \r\n    terminalEndRef.current?.scrollIntoView({ behavior: \"smooth\" }); \r\n  }, [lines]);\r\n\r\n  // Focus input when component mounts\r\n  useEffect(() => {\r\n    if (inputRef.current) {\r\n      inputRef.current.focus();\r\n    }\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"section terminal-box\">\r\n      <div className=\"terminal-header\">\r\n        <div className=\"terminal-lights\">\r\n          <div className=\"light red\"></div>\r\n          <div className=\"light yellow\"></div>\r\n          <div className=\"light green\"></div>\r\n        </div>\r\n        <div className=\"terminal-title\">CHAT-CLI TERMINAL</div>\r\n      </div>\r\n\r\n      <div className=\"terminal-output\">\r\n        <div className=\"output-content\">\r\n          {lines.map((line, i) => {\r\n            // Check if this is a structured object\r\n            if (typeof line === 'object' && line.type) {\r\n              switch (line.type) {\r\n                case \"header\":\r\n                  return (\r\n                    <div className=\"line help-header\" key={i}>\r\n                      {line.content}\r\n                    </div>\r\n                  );\r\n                case \"command\":\r\n                  return (\r\n                    <div className=\"help-line\" key={i}>\r\n                      <span className=\"help-command\">{line.command}</span>\r\n                      <span className=\"help-description\">{line.description}</span>\r\n                    </div>\r\n                  );\r\n                case \"profile-header\":\r\n                  return (\r\n                    <div className=\"line profile-header-line\" key={i}>\r\n                      {line.content}\r\n                    </div>\r\n                  );\r\n                case \"profile-info\":\r\n                  return (\r\n                    <div className=\"profile-info-line\" key={i}>\r\n                      <span className=\"profile-info-label\">{line.label}</span>\r\n                      <span className=\"profile-info-value\">{line.value}</span>\r\n                    </div>\r\n                  );\r\n                case \"success\":\r\n                  return (\r\n                    <div className=\"line success-message\" key={i}>\r\n                      <span className=\"line-prefix\">{i > 1 ? \">\" : \"\"}</span>\r\n                      {line.content}\r\n                    </div>\r\n                  );\r\n                case \"error\":\r\n                  return (\r\n                    <div className=\"line error-line\" key={i}>\r\n                      <span className=\"line-prefix\">{i > 1 ? \">\" : \"\"}</span>\r\n                      {line.content}\r\n                    </div>\r\n                  );\r\n                case \"info\":\r\n                  return (\r\n                    <div className=\"line info-line\" key={i}>\r\n                      <span className=\"line-prefix\">{i > 1 ? \">\" : \"\"}</span>\r\n                      {line.content}\r\n                    </div>\r\n                  );\r\n                default:\r\n                  return (\r\n                    <div className=\"line output-line\" key={i}>\r\n                      <span className=\"line-prefix\">{i > 1 ? \">\" : \"\"}</span>\r\n                      {line.content}\r\n                    </div>\r\n                  );\r\n              }\r\n            }\r\n            \r\n            // Regular text line\r\n            let lineClass = \"line\";\r\n            if (line.startsWith(\"$ \")) {\r\n              lineClass += \" cmd-line\"; // Command input\r\n            } else if (line.toLowerCase().includes(\"error\") || line.toLowerCase().includes(\"not found\") || line.toLowerCase().includes(\"usage\")) {\r\n              lineClass += \" error-line\"; // Error messages\r\n            } else if (line.toLowerCase().includes(\"following\") || line.toLowerCase().includes(\"unfollowed\") || line.toLowerCase().includes(\"success\")) {\r\n              lineClass += \" success-line\"; // Success messages\r\n            } else if (line.toLowerCase().includes(\"welcome\") || line.toLowerCase().includes(\"type\") || line.toLowerCase().includes(\"switched\")) {\r\n              lineClass += \" info-line\"; // Informational text\r\n            } else {\r\n              lineClass += \" output-line\"; // Regular output\r\n            }\r\n            \r\n            return (\r\n              <div className={lineClass} key={i}>\r\n                <span className=\"line-prefix\">{i > 1 ? \">\" : \"\"}</span>\r\n                {line}\r\n              </div>\r\n            );\r\n          })}\r\n          <div ref={terminalEndRef} />\r\n        </div>\r\n      </div>\r\n\r\n      <form className=\"terminal-input\" onSubmit={handleSubmit}>\r\n        <div className=\"input-wrapper\">\r\n          <span className=\"prompt\">system&gt;</span>\r\n          <input\r\n            ref={inputRef}\r\n            value={input}\r\n            onChange={(e) => setInput(e.target.value)}\r\n            onKeyDown={handleKeyDown}\r\n            autoFocus\r\n            aria-label=\"terminal-input\"\r\n            className=\"terminal-cursor\"\r\n          />\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}